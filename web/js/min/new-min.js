$(document).ready(function(){function e(e){i.select("div").remove(),i.append("div").style("position","absolute").style("z-index","10").style("background-color","#E6E6E6").html("Name: "+e.name+"<br/>Description: "+e.description+"<br/>Date"+e.created_date+"<br/>Message: "+e.message+"<br/>Media Type: "+e.media_type+'<br/>Media URL: <a href="'+e.url+'" target="_newtab">source</a><br/><br/>DEBUG INFO:<br/>year: '+e.year+"<br/>node type: "+e.nodeType+"<br/>node size: "+e.size+"<br/>node xid: "+e.xid+"<br/>")}function t(e){switch(e.nodeType){case"likerNode":return 5*Math.sqrt(e.size)||6;case"taggedNode":return 5*Math.sqrt(e.size)||4;case"postNode":return 5*Math.sqrt(e.size)||4.5;case"coreNode":return 20;case"year":return Math.sqrt(e.size)/5||8;default:return 5*Math.sqrt(e.size)||4.5}}function r(e){switch(e){case"likerNode":return"#5C85FF";case"taggedNode":return"#0099CC";case"postNode":return"#FF9900";case"coreNode":return"#999980";case"year":return"green";default:return"pink"}}function n(e){switch(e){case"coreLink":return"#999";case"likeLink":return"#4C0000";case"taggedLink":return"#B84D4D";default:return"#999"}}var a=700,s=800,i=d3.select("#tooltip"),o=d3.layout.force().linkStrength(.5).friction(.9).linkDistance(40).charge(-150).gravity(.1).theta(.8).alpha(.1).size([a,s]),c=d3.select("svg").attr("width",a).attr("height",s),d=c.append("rect").attr("x",0).attr("y",0).attr("height",s).attr("width",a).style("stroke","gray").style("fill","none").style("stroke-width","0.9");d3.json("data/res.json",function(a,s){o.nodes(s.nodes).links(s.links).start();var i=c.selectAll(".link").data(s.links).enter().append("line").attr("class","link").style("stroke",function(e){return n(e.linkType)}).style("stroke-width",1.5),d=c.selectAll(".node").data(s.nodes).enter().append("circle").attr("class","node").attr("r",function(e){return t(e)}).style("fill",function(e){return r(e.nodeType)}).on("mouseover",e).call(o.drag);d.append("title").text(function(e){return e.name}),o.on("tick",function(){i.attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}),d.attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y})})})});